(()=>{var e={};e.id=665,e.ids=[665],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8663:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>u,routeModule:()=>h,tree:()=>d}),s(7190),s(5866),s(6271);var r=s(3191),a=s(8716),n=s(7922),o=s.n(n),i=s(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let d=["",{children:["(auth)",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7190)),"C:\\Users\\hp\\Desktop\\n\\client\\app\\(auth)\\login\\page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,6271)),"C:\\Users\\hp\\Desktop\\n\\client\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\hp\\Desktop\\n\\client\\app\\(auth)\\login\\page.tsx"],c="/(auth)/login/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(auth)/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},150:(e,t,s)=>{Promise.resolve().then(s.bind(s,849))},5779:(e,t,s)=>{Promise.resolve().then(s.bind(s,5971)),Promise.resolve().then(s.t.bind(s,2481,23))},9488:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},849:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u,dynamic:()=>l,revalidate:()=>d});var r=s(326),a=s(7577),n=s(6824),o=s(5047);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(2881).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),l="force-dynamic",d=0;function u(){let e=(0,o.useRouter)(),[t,s]=(0,a.useState)(""),[l,d]=(0,a.useState)(""),[u,c]=(0,a.useState)(!1),[m,h]=(0,a.useState)(""),[p,g]=(0,a.useState)(!1),[x,y]=(0,a.useState)("email"),[f,b]=(0,a.useState)(""),[w,v]=(0,a.useState)(""),[P,j]=(0,a.useState)(""),[S,k]=(0,a.useState)(""),[C,N]=(0,a.useState)(!1),T=async s=>{s.preventDefault(),c(!0),h("");try{let s=await n.iJ.login({email:t,password:l});localStorage.setItem("token",s.token),localStorage.setItem("role",s.user.role??"user"),"admin"===s.user.role?(localStorage.setItem("adminId",s.user._id),e.push("/admin")):(localStorage.setItem("userId",s.user._id),e.push("/dashboard"))}catch(e){h(e?.response?.data?.message||e?.message||"Login failed")}finally{c(!1)}},E=async()=>{try{if(N(!0),k(""),"email"===x){let e=await n.iJ.forgotPassword({email:f});k(e.message||"OTP has been sent to your email."),y("otp")}else{let e=await n.iJ.resetPassword({newPassword:P},w);k(e.message||"Password reset successfully."),setTimeout(()=>{g(!1),y("email"),b(""),v(""),j(""),k("")},2e3)}}catch(e){k(e?.response?.data?.message||e?.message||"Request failed")}finally{N(!1)}},O=async()=>{try{N(!0),k("");let e=await n.iJ.resendOtp({email:f});k(e.message||"A new OTP has been sent to your email.")}catch(e){k(e?.response?.data?.message||e?.message||"Failed to resend OTP")}finally{N(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-6",children:[(0,r.jsxs)("div",{className:"card max-w-md w-full p-8 bg-white/10 backdrop-blur-lg rounded-2xl",children:[r.jsx("h1",{className:"h1 mb-6 text-center text-white",children:"Welcome back"}),m&&r.jsx("div",{className:"mb-4 text-red-300",children:m}),(0,r.jsxs)("form",{onSubmit:T,className:"space-y-4","data-testid":"register-form",children:[r.jsx("input",{className:"input bg-white text-black placeholder-gray-500 w-full",placeholder:"Email",type:"email",value:t,onChange:e=>s(e.target.value),required:!0}),r.jsx("input",{className:"input bg-white text-black placeholder-gray-500 w-full",placeholder:"Password",type:"password",value:l,onChange:e=>d(e.target.value),required:!0}),(0,r.jsxs)("button",{className:"btn btn-primary w-full",disabled:u,children:[r.jsx(i,{size:18}),u?"Signing in...":"Sign in"]})]}),r.jsx("p",{className:"mt-4 text-sm text-white/70 text-center",children:r.jsx("button",{className:"text-brand-300 hover:underline",onClick:()=>g(!0),children:"Forgot password?"})}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-white/70 text-center",children:["No account?"," ",r.jsx("a",{href:"/register",className:"text-brand-300 hover:underline",children:"Create one"})]}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-white/70 text-center",children:["Already registered but not verified?"," ",r.jsx("button",{className:"text-brand-300 hover:underline",onClick:()=>{if(!t){alert("Please enter your email above first.");return}e.push(`/verify-otp?email=${encodeURIComponent(t)}`)},children:"Activate account"})]})]}),p&&r.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md p-6 relative",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4 text-black",children:"Reset Password"}),S&&r.jsx("div",{className:"mb-3 text-sm text-blue-600",children:S}),"email"===x&&(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("input",{type:"email",className:"input w-full bg-white text-black placeholder-gray-500",placeholder:"Enter your email",value:f,onChange:e=>b(e.target.value)}),r.jsx("button",{className:"btn btn-primary w-full",onClick:E,disabled:C,children:C?"Sending OTP...":"Send OTP"})]}),"otp"===x&&(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("input",{type:"text",className:"input w-full bg-white text-black placeholder-gray-500",placeholder:"Enter OTP",value:w,onChange:e=>v(e.target.value)}),r.jsx("input",{type:"password",className:"input w-full bg-white text-black placeholder-gray-500",placeholder:"Enter new password",value:P,onChange:e=>j(e.target.value)}),r.jsx("button",{className:"btn btn-primary w-full bg-blue-600 text-white hover:bg-blue-700 rounded-lg py-2 text-center",onClick:E,disabled:C,children:C?"Resetting...":"Reset Password"}),r.jsx("button",{className:"btn btn-primary w-full bg-blue-600 text-white hover:bg-blue-700 rounded-lg py-2 text-center",onClick:O,disabled:C,children:C?"Resending...":"Resend OTP"})]}),r.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-black",onClick:()=>g(!1),children:"✕"})]})})]})}},5971:(e,t,s)=>{"use strict";s.d(t,{LanguageProvider:()=>i,Z:()=>l});var r=s(326),a=s(7577);let n={en:{welcomeTitle:"Welcome to Crypto Royal!",welcomeMessage:"Hey {name}, we are thrilled to have you on board! Our platform is designed to help you achieve your financial goals through smart investing and expert insights. Get started by exploring our resources, learning about our investment options, and connecting with our community. We're here to support you every step of the way. Happy investing!",shares:"Shares",referrals:"Referrals",latestMessages:"Latest Messages from Admin"},zh:{welcomeTitle:"欢迎来到 Crypto Royal!",welcomeMessage:"你好 {name}, 我们很高兴您能加入我们！我们的平台旨在通过智能投资和专家见解帮助您实现财务目标。您可以先探索我们的资源，了解投资选项，并与社区互动。我们会在每一步为您提供支持。祝您投资顺利！",shares:"分享次数",referrals:"邀请好友",latestMessages:"管理员的最新消息"}},o=(0,a.createContext)(null);function i({children:e}){let[t,s]=(0,a.useState)("en"),i={lang:t,setLang:s,t:n[t]};return r.jsx(o.Provider,{value:i,children:e})}let l=()=>{let e=(0,a.useContext)(o);if(!e)throw Error("useLanguage must be used inside LanguageProvider");return e}},6824:(e,t,s)=>{"use strict";s.d(t,{BG:()=>i,iJ:()=>d,xU:()=>l});let r="http://localhost:8000/api";function a(){return{adminId:"",userId:""}}async function n(e){if(204===e.status)return null;let t=await e.text();if(!t)return null;try{return JSON.parse(t)}catch{return t}}async function o(e,t={}){if(!r)throw Error("Missing NEXT_PUBLIC_API_URL");let s=t.body instanceof FormData,a=s?{}:{"Content-Type":"application/json"},o=t.token||"";o&&(a.Authorization=`Bearer ${o}`);let i=await fetch(`${r}${e}`,{method:t.method||"GET",headers:a,body:t.body?s?t.body:JSON.stringify(t.body):void 0});if(!i.ok){let e=`Request failed: ${i.status}`;try{let t=await i.json();t?.message?e=t.message:"string"==typeof t&&(e=t)}catch{try{let t=await i.text();t&&(e=t)}catch{}}throw Error(e)}return await n(i)}let i={me:e=>o("/users/profile",{method:"GET",token:e}),getById:(e,t)=>o(`/users/${e}`,{method:"GET",token:t}),search:(e,t)=>o(`/users/search?q=${encodeURIComponent(e)}`,{method:"GET",token:t}),changePassword:e=>o("/users/password/change",{method:"POST",body:e}),requestPasswordOtp:()=>o("/users/password/request-otp",{method:"POST"}),resetPasswordWithOtp:e=>o("/users/password/reset-otp",{method:"POST",body:e}),updateProfile:(e,t)=>o("/users/profile",{method:"PUT",body:e,token:t}),stats:e=>o("/users/me/stats",{method:"GET",token:e}),unread:e=>o("/users/messages/unread",{method:"GET",token:e})},l={getConversation:(e,t)=>o(`/chat/${e}`,{method:"GET",token:t}),sendMessage:(e,t)=>{let{adminId:s,userId:r}=a(),n=t?.senderId||s||r||"";if(console.log("\uD83D\uDCE4 Sending message:",{sender:n,receiver:e.to,message:e.message,fileUrl:e.fileUrl,type:e.type}),!e.to)throw Error("Receiver ID (data.to) is missing!");return o("/chat/send",{method:"POST",body:{sender:n,receiver:e.to,message:e.message||"",fileUrl:e.fileUrl||"",type:e.type||"text"},token:t?.token})},upload:async(e,t)=>{let s=await o("/chat/upload",{method:"POST",body:e,token:t}),r=s?.fileUrl||s?.url||"";if(!r)throw Error("Upload failed: missing fileUrl");return{fileUrl:r}},removeUser:(e,t)=>o(`/chat/remove/${e}`,{method:"DELETE",token:t}),getConversations:async e=>{let{userId:t}=a();if(!t)return[];let s=await o(`/chat/${t}`,{method:"GET",token:e});if(!Array.isArray(s)||0===s.length)return[];let r=s[s.length-1],n=r?.message||(r?.type==="image"?"[Image]":r?.type==="audio"?"[Audio]":r?.type==="emoji"?"[Emoji]":"");return[{_id:r?._id||`conv-${t}`,userId:t,lastMessage:n||"",updatedAt:r?.createdAt||new Date().toISOString()}]}},d={register:e=>o("/auth/register",{method:"POST",body:e}),verifyOtp:e=>o("/auth/verify-otp",{method:"POST",body:e}),login:async e=>{let t=await o("/auth/login",{method:"POST",body:e}),s=t?.token||t?.accessToken||"",r={_id:t?._id||t?.user?._id||"",name:t?.name||t?.user?.name||"",email:t?.email||t?.user?.email||"",photo:t?.photo||t?.user?.photo||void 0,role:t?.role||t?.user?.role||void 0,createdAt:t?.createdAt||t?.user?.createdAt||void 0};if(!s||!r._id)throw Error("Invalid login response from server");return{token:s,user:r}},forgotPassword:e=>o("/auth/forgot-password",{method:"POST",body:e}),resetPassword:(e,t)=>o("/auth/reset-password",{method:"POST",body:e,token:t}),resendOtp:e=>o("/auth/resend-otp",{method:"POST",body:e})}},2881:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s(7577);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=(...e)=>e.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:i="",children:l,iconNode:d,...u},c)=>(0,r.createElement)("svg",{ref:c,...o,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:n("lucide",i),...u},[...d.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(l)?l:[l]])),l=(e,t)=>{let s=(0,r.forwardRef)(({className:s,...o},l)=>(0,r.createElement)(i,{ref:l,iconNode:t,className:n(`lucide-${a(e)}`,s),...o}));return s.displayName=`${e}`,s}},5047:(e,t,s)=>{"use strict";var r=s(7389);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},7190:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>o,__esModule:()=>n,default:()=>d,dynamic:()=>i,revalidate:()=>l});var r=s(8570);let a=(0,r.createProxy)(String.raw`C:\Users\hp\Desktop\n\client\app\(auth)\login\page.tsx`),{__esModule:n,$$typeof:o}=a;a.default;let i=(0,r.createProxy)(String.raw`C:\Users\hp\Desktop\n\client\app\(auth)\login\page.tsx#dynamic`),l=(0,r.createProxy)(String.raw`C:\Users\hp\Desktop\n\client\app\(auth)\login\page.tsx#revalidate`),d=(0,r.createProxy)(String.raw`C:\Users\hp\Desktop\n\client\app\(auth)\login\page.tsx#default`)},6271:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,metadata:()=>u});var r=s(9510);s(7272);var a=s(8570);let n=(0,a.createProxy)(String.raw`C:\Users\hp\Desktop\n\client\contexts\LanguageContext.tsx`),{__esModule:o,$$typeof:i}=n;n.default;let l=(0,a.createProxy)(String.raw`C:\Users\hp\Desktop\n\client\contexts\LanguageContext.tsx#LanguageProvider`);(0,a.createProxy)(String.raw`C:\Users\hp\Desktop\n\client\contexts\LanguageContext.tsx#useLanguage`);var d=s(7710);let u={title:"Crypto Royal",description:"Beautiful investment dashboard",icons:{icon:[{url:"/logo.png"}]}};function c({children:e}){return r.jsx("html",{lang:"en",className:"h-full",children:r.jsx("body",{className:"h-full bg-gray-950 text-white",children:r.jsx(l,{children:(0,r.jsxs)("div",{className:"flex flex-col min-h-screen",children:[r.jsx("header",{className:"flex items-center justify-between px-4 py-3 border-b border-white/10",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(d.default,{src:"/logo.png",alt:"CryptoRoyal Logo",width:40,height:40,className:"rounded w-8 h-8 sm:w-10 sm:h-10",priority:!0}),r.jsx("span",{className:"text-lg font-bold text-brand-200 sm:text-xl",children:"Crypto Royal"})]})}),r.jsx("main",{className:"flex-1 w-full max-w-screen-xl mx-auto px-4 py-4 sm:px-6 sm:py-6",children:e})]})})})})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[583],()=>s(8663));module.exports=r})();